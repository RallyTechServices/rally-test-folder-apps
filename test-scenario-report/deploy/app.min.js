Ext.define("Rally.technicalservices.InfoLink",{extend:"Ext.Component",alias:"widget.tsinfolink",informationHtml:null,title:"Information",renderTpl:"<div id='{id}-infolinkWrap' class='tsinfolink'>TS</div>",initComponent:function(){this.callParent(arguments)},onRender:function(){this.callParent(arguments),this.mon(this.el,"click",this.onClick,this)},_generateChecksum:function(a){var b,c=305419896;for(a=a.replace(/var CHECKSUM = .*;/,""),b=0;b<a.length;b++)c+=a.charCodeAt(b)*b;return c},_checkChecksum:function(){var a=this;Ext.Ajax.request({url:document.URL,params:{id:1},success:function(b){text=b.responseText,CHECKSUM&&CHECKSUM!==a._generateChecksum(text)&&(console.log("Checksums don't match!"),a.dialog&&a.dialog.add({xtype:"container",html:"Checksums do not match"}))}})},onClick:function(){var a=this;this._checkChecksum(this);var b=[];this.informationHtml&&b.push({xtype:"container",html:this.informationHtml}),b.push({xtype:"container",html:"This app was created by the Rally Technical Services Team."}),APP_BUILD_DATE&&b.push({xtype:"container",html:"Build date/time: "+APP_BUILD_DATE}),this.dialog&&this.dialog.destroy(),this.dialog=Ext.create("Rally.ui.dialog.Dialog",{defaults:{padding:5,margin:5},closable:!0,draggable:!0,title:a.title,items:b}),this.dialog.show()}}),Ext.define("Rally.technicalservices.Logger",{constructor:function(a){Ext.apply(this,a)},log:function(){var a="[ "+Ext.util.Format.date(new Date,"Y-m-d H:i:s.u")+" ]",b=[];b=Ext.Array.push(b,[a]),b=Ext.Array.push(b,Ext.Array.slice(arguments,0)),window.console&&console.log.apply(console,b)}}),Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",logger:new Rally.technicalservices.Logger,defaults:{padding:5,margin:5},items:[{xtype:"container",itemId:"message_box"},{xtype:"container",itemId:"grid_box"},{xtype:"tsinfolink",informationHtml:"Displays Test Cases that have either no value or duplicate values in a chosen field."}],launch:function(){"undefined"==typeof this.getAppId()?this._showExternalSettingsDialog(this.getSettingsFields()):this._getData()},_getData:function(){this.logger.log("_getData");var a=this.getSetting("scenario_id_field_name");"undefined"==typeof a?this.down("#message_box").update("Select 'Edit App Settings' from the gear menu to select a field to represent Scenario IDs"):this.logger.log("Field Name: ",a)},getSettingsFields:function(){return[{name:"scenario_id_field_name",xtype:"rallyfieldcombobox",model:"TestCase",fieldLabel:"ID Field Name",readyEvent:"ready"}]},_showExternalSettingsDialog:function(a){var b=this;this.settings_dialog&&this.settings_dialog.destroy(),this.settings_dialog=Ext.create("Rally.ui.dialog.Dialog",{autoShow:!1,draggable:!0,width:400,title:"Settings",buttons:[{text:"OK",handler:function(c){var d={};Ext.Array.each(a,function(a){d[a.name]=c.up("rallydialog").down('[name="'+a.name+'"]').getValue()}),b.settings=d,c.up("rallydialog").destroy(),b._getData()}}],items:[{xtype:"container",html:"&nbsp;",padding:5,margin:5},{xtype:"container",itemId:"field_box",padding:5,margin:5}]}),Ext.Array.each(a,function(a){b.settings_dialog.down("#field_box").add(a)}),this.settings_dialog.show()}});